#include "ponto.h"

//usuário deve informar o nome da tabela e a chave primária a ser apagada

void apagar_tabela(){

	char nomeTabela[100];
	char linha[100];
	char * ptr_palavra;
	FILE * todosArquivos;
	FILE * novoArquivo;
	char * tabela;
	char * nova;

	tabela = "tabelas.TXT";
	nova = "transição.TXT";

	printf("Qual o nome da tabela que deseja apagar?\n");
	fgets(nomeTabela,100,stdin);

	todosArquivos = fopen("tabelas.TXT", "r");
	novoArquivo = fopen("transição.TXT", "w");
	
	if (todosArquivos == NULL)
	{
		printf("erro na abertura do arquivo\n");
		return;
	}

	while(!feof(todosArquivos)){

		fgets(linha, 100,todosArquivos);
		//printf("%s", linha);
		ptr_palavra = strpbrk (linha, " ");
		if (ptr_palavra != nomeTabela)
		{
			fprintf(novoArquivo, "Nome: %s", ptr_palavra);
		}
	}
	remove(nomeTabela);
	remove(tabela);
	rename(nova, tabela);

	return;
}

int main()
{
	apagar_tabela();
	return 0;
}